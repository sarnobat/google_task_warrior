<html>
<head>
<!-- <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"> -->
<script src="jquery/jquery-1.9.1.js">
</script>
<script>

$(document).ready(function(){
    $.getJSON("http://netgear.rohidekar.com:4456/not_now/items" ,function(result){

		$.each(result, function(i, field){
			var table = "";
			table +='<table>';
			$.each(JSON.parse(field), function(k,v){
				if (k == 'daysToPostpone') {
					return;
				}
				var title = (v.title.split(/@/)[0]);
				var title2 = title.replace("Reminder: ","");
				table +='<tr id=event-'+k+'>';
				table +='<td>' + k + "</td><td>&nbsp;</td><td>" + capitalize(title2) + "</td>";
				var quickPostponeAmounts = [1, 4, 7, 15, 30, 60];
				var quickPostponeAmount;
				for(var i in quickPostponeAmounts) {
					var quickPostponeAmount = quickPostponeAmounts[i];
					table +="<td>&nbsp;&nbsp;<button type=button onclick='postpone("+k+","+quickPostponeAmount+")'> " +quickPostponeAmount + " days</button >"+"&nbsp;&nbsp;</td>";
				}
				
				table +='</tr>';
			});		
			table +=	'</table>';
			$("#items").append(table);
		});
    });
});

function postpone(itemNumber, daysToPostpone) {
    $.getJSON("http://netgear.rohidekar.com:4456/not_now/postpone?itemNumber=" + itemNumber + "&daysToPostpone=" + itemNumber, daysToPostpone,function(result){
    	console.log("success"); 
    });
    $("#event-" + itemNumber).remove();
    
}

function capitalize(str) {
    strVal = '';
    str = str.split(' ');
    for (var chr = 0; chr < str.length; chr++) {
        strVal += str[chr].substring(0, 1).toUpperCase() + str[chr].substring(1, str[chr].length) + ' '
    }
    return strVal
}

</script>
</head>
<body>

<div id="items"></div>

</body>
</html>